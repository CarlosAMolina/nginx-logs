if [ $# -eq 0 ]; then
  echo No arguments supplied
  exit 1
elif [ $1 == "python" ]; then
  echo Init Python
  PROCESS_NAME=python
  RESULTS_FILE=results-python.txt
elif [ $1 == "rust" ]; then
  echo Init Rust
  PROCESS_NAME=nginx_logs
  RESULTS_FILE=results-rust.txt
else
  exit 1
fi

echo Stop this script manually with Control + C

echo CPU% MEM% \\n TIME > $RESULTS_FILE
while :
do
  ps --no-headers -p $(pgrep $PROCESS_NAME) -o %cpu,%mem >> $RESULTS_FILE 2> /dev/null && date +"%T.%N" >> $RESULTS_FILE
done
